<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Cyris"><title>GIT 时光机 · Cyris's pen</title><meta name="description" content="Ak师傅的小灶上谈了些关于git的常见用法，回去以后做了些整理。

参考链接：

Aklis写的wiki阮一峰的git教程廖雪峰的git教程

一、时光机硬件说明书
Workspace： 工作区
Index / Stage： 暂存区
Repository： 本地仓库
Remote： 远程仓库
HEA"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">Cyris's pen</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">绿生</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">Home</a></li><li><a href="/archives">Archive</a></li><li><a href="/categories">Categories</a></li><li><a href="/tags">Tags</a></li><li><a href="/about/index.html">About</a></li><li class="soc"><a href="https://github.com/iCyris" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a><a href="https://cyris.pen.moe/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2018&nbsp;<a target="_blank" href="https://cyris.pen.moe" rel="noopener noreferrer">Cyris</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Powered by&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>GIT 时光机</a></p><p class="post-meta"><span class="date meta-item">Posted at&nbsp;2017-05-13</span><span class="meta-item"><i class="fa fa-tag"></i><span>&nbsp;</span><a href="/tags/GIT/" title="GIT" class="a-tag">GIT</a><span>&nbsp;</span><a href="/tags/Wiki/" title="Wiki" class="a-tag">Wiki</a><span>&nbsp;</span></span></p><p class="post-abstract"><p>Ak师傅的小灶上谈了些关于git的常见用法，回去以后做了些整理。</p>
<a id="more"></a>
<p>参考链接：</p>
<blockquote>
<p><a href="https://wiki.vidar.club/doku.php?id=wiki:git%E6%97%B6%E5%85%89%E6%9C%BA" target="_blank" rel="noopener">Aklis写的wiki</a><br><a href="http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html" target="_blank" rel="noopener">阮一峰的git教程</a><br><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000" target="_blank" rel="noopener">廖雪峰的git教程</a></p>
</blockquote>
<h1 id="一、时光机硬件说明书"><a href="#一、时光机硬件说明书" class="headerlink" title="一、时光机硬件说明书"></a>一、时光机硬件说明书</h1><ul>
<li><strong>Workspace：</strong> 工作区</li>
<li><strong>Index / Stage：</strong> 暂存区</li>
<li><strong>Repository：</strong> 本地仓库</li>
<li><strong>Remote：</strong> 远程仓库</li>
<li><strong>HEAD：</strong> 当前分支</li>
<li><strong>Commit history：</strong> 历史记录</li>
</ul>
<h2 id="0X01-零件组装"><a href="#0X01-零件组装" class="headerlink" title="0X01 零件组装"></a>0X01 零件组装</h2><p>这里有三种情况：  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1. 在当前目录新建一个Git代码库(如果是要使用github上的库，需要先pull下来，不然无法</span><br><span class="line">push到目标库，这里的第三种方法就可以。)</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line">2. 新建目录，将其初始化为Git仓库</span><br><span class="line">$ git init project-name</span><br><span class="line"></span><br><span class="line">3. pull下来一个项目与其代码历史</span><br><span class="line">$ git <span class="built_in">clone</span> URL</span><br></pre></td></tr></table></figure>
<h2 id="0X02-时光机的配置"><a href="#0X02-时光机的配置" class="headerlink" title="0X02 时光机的配置"></a>0X02 时光机的配置</h2><p>Git有个设置文件<strong>.gitconfig</strong>，它可以全局配置，也可以项目配置。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1.显示当前的Git配置</span><br><span class="line">$ git<span class="built_in"> config </span>--list</span><br><span class="line"></span><br><span class="line">2.编辑Git配置文件</span><br><span class="line">$ git<span class="built_in"> config </span>-e [--global]</span><br><span class="line"></span><br><span class="line">3.设置提交代码时的用户信息</span><br><span class="line">$ git<span class="built_in"> config </span>[--global] user.name <span class="string">"name"</span></span><br><span class="line">$ git<span class="built_in"> config </span>[--global] user.email <span class="string">"email address"</span></span><br></pre></td></tr></table></figure>
<h2 id="0X03-在时光机上注入add钙奶"><a href="#0X03-在时光机上注入add钙奶" class="headerlink" title="0X03 在时光机上注入add钙奶"></a>0X03 在时光机上注入add钙奶</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.添加指定文件到暂存区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git add file1 file2 ...    </span></span><br><span class="line"></span><br><span class="line">2.添加指定目录到暂存区（包括其中的子目录）</span><br><span class="line"><span class="meta">$</span><span class="bash"> git add dir（文件夹名称）</span></span><br><span class="line"></span><br><span class="line">3.添加当前目录所有文件到暂存区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git add .</span></span><br><span class="line"></span><br><span class="line">4.分次提交</span><br><span class="line"><span class="meta">$</span><span class="bash"> git add -p</span></span><br><span class="line"></span><br><span class="line">5.删除工作区文件，并且把这次删除放入暂存区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git rm file1 file2 ...</span></span><br><span class="line"></span><br><span class="line">6.停止追踪指定文件（该文件会保留在工作区）</span><br><span class="line"><span class="meta">$</span><span class="bash"> git rm --cached file</span></span><br><span class="line"></span><br><span class="line">7.改名文件，然后把这个改名文件放入暂存区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git mv file-original file-renamed</span></span><br></pre></td></tr></table></figure>
<h2 id="0X04-挪挪挪，挪进仓库"><a href="#0X04-挪挪挪，挪进仓库" class="headerlink" title="0X04 挪挪挪，挪进仓库"></a>0X04 挪挪挪，挪进仓库</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">1.提交暂存区到仓库区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -m <span class="string">"message"</span></span></span><br><span class="line"></span><br><span class="line">2.提交暂存区指定文件到仓库区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit file1 file2 ... -m <span class="string">"message"</span></span></span><br><span class="line"></span><br><span class="line">3.提交工作区自上次commit之后的变化，直接到仓库区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -a</span></span><br><span class="line"></span><br><span class="line">4.提交时显示所有diff信息</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit -v</span></span><br><span class="line"></span><br><span class="line">5.使用一次新的commit，替代上一次提交。如果代码没有任何新变化，则用来改写上一次commit的提交信息</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend -m <span class="string">"message"</span></span></span><br><span class="line"></span><br><span class="line">6.重做上一次commit，并包括指定文件的新变化</span><br><span class="line"><span class="meta">$</span><span class="bash"> git commit --amend file1 file2 ...</span></span><br></pre></td></tr></table></figure>
<h2 id="0X05-时光机分机"><a href="#0X05-时光机分机" class="headerlink" title="0X05 时光机分机"></a>0X05 时光机分机</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">1.列出所有本地分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch</span></span><br><span class="line"></span><br><span class="line">2.列出所有远程分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -r</span></span><br><span class="line"></span><br><span class="line">3.列出所有本地分支和远程分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -a</span></span><br><span class="line"></span><br><span class="line">4.新建一个分支，但依然停留在当前分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch [branch-name]</span></span><br><span class="line"></span><br><span class="line">5.新建一个分支，并切换到该分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -b [branch]</span></span><br><span class="line"></span><br><span class="line">6.新建一个分支，指向指定commit</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch [branch] [commit]</span></span><br><span class="line"></span><br><span class="line">7.新建一个分支，与指定的远程分支建立追踪关系</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch --track [branch] [remote-branch]</span></span><br><span class="line"></span><br><span class="line">8.切换到指定分支，并更新工作区</span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout [branch-name]</span></span><br><span class="line"></span><br><span class="line">9.切换到上一个分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git checkout -</span></span><br><span class="line"></span><br><span class="line">10.建立追踪关系，在现有分支与指定的远程分支之间</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch --<span class="built_in">set</span>-upstream [branch] [remote-branch]</span></span><br><span class="line"></span><br><span class="line">11.合并指定分支到当前分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git merge [branch]</span></span><br><span class="line"></span><br><span class="line">12.选择一个commit，合并进当前分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git cherry-pick [commit]</span></span><br><span class="line"></span><br><span class="line">13.删除分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -d [branch-name]</span></span><br><span class="line"></span><br><span class="line">14.删除远程分支</span><br><span class="line"><span class="meta">$</span><span class="bash"> git push origin --delete [branch-name]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git branch -dr [remote/branch]</span></span><br></pre></td></tr></table></figure>
<h2 id="0X06-Tag"><a href="#0X06-Tag" class="headerlink" title="0X06 Tag"></a>0X06 Tag</h2><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.列出所有<span class="keyword">tag</span></span><br><span class="line">$ git <span class="keyword">tag</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.新建一个<span class="keyword">tag</span>在当前commit</span><br><span class="line">$ git <span class="keyword">tag</span> <span class="title">[tag</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.新建一个<span class="keyword">tag</span>在指定commit</span><br><span class="line">$ git <span class="keyword">tag</span> <span class="title">[tag</span>] [commit]</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.删除本地<span class="keyword">tag</span></span><br><span class="line">$ git <span class="keyword">tag</span> <span class="title">-d</span> [<span class="keyword">tag</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>.删除远程<span class="keyword">tag</span></span><br><span class="line">$ git push origin :refs/tags/[tagName]</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>.查看<span class="keyword">tag</span>信息</span><br><span class="line">$ git show [<span class="keyword">tag</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">7</span>.提交指定<span class="keyword">tag</span></span><br><span class="line">$ git push [remote] [<span class="keyword">tag</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">8</span>.提交所有<span class="keyword">tag</span></span><br><span class="line">$ git push [remote] --tags</span><br><span class="line"></span><br><span class="line"><span class="number">9</span>.新建一个分支，指向某个<span class="keyword">tag</span></span><br><span class="line">$ git checkout -b [branch] [<span class="keyword">tag</span>]</span><br></pre></td></tr></table></figure>
<h2 id="0X07-信息查看"><a href="#0X07-信息查看" class="headerlink" title="0X07 信息查看"></a>0X07 信息查看</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">1.显示有变更的文件</span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line"></span><br><span class="line">2.显示当前分支的版本历史</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span></span></span><br><span class="line"></span><br><span class="line">3.显示commit历史，以及每次commit发生变更的文件</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --<span class="built_in">stat</span></span></span><br><span class="line"></span><br><span class="line">4.搜索提交历史，根据关键词</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -S [keyword]</span></span><br><span class="line"></span><br><span class="line">5.显示某个commit之后的所有变动，每个commit占据一行</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> [tag] HEAD --pretty=format:%s</span></span><br><span class="line"></span><br><span class="line">6.显示某个commit之后的所有变动，其"提交说明"必须符合搜索条件</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> [tag] HEAD --grep feature</span></span><br><span class="line"></span><br><span class="line">7.显示某个文件的版本历史，包括文件改名</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --follow [file]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git whatchanged [file]</span></span><br><span class="line"></span><br><span class="line">8.显示指定文件相关的每一次diff</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -p [file]</span></span><br><span class="line"></span><br><span class="line">9.显示过去5次提交</span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -5 --pretty --oneline</span></span><br><span class="line"></span><br><span class="line">10.显示所有提交过的用户，按提交次数排序</span><br><span class="line"><span class="meta">$</span><span class="bash"> git shortlog -sn</span></span><br><span class="line"></span><br><span class="line">11.显示指定文件是什么人在什么时间修改过</span><br><span class="line"><span class="meta">$</span><span class="bash"> git blame [file]</span></span><br><span class="line"></span><br><span class="line">12.显示暂存区和工作区的差异</span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff</span></span><br><span class="line"></span><br><span class="line">13.显示暂存区和上一个commit的差异</span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff --cached [file]</span></span><br><span class="line"></span><br><span class="line">14.显示工作区与当前分支最新commit之间的差异</span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff HEAD</span></span><br><span class="line"></span><br><span class="line">15.显示两次提交之间的差异</span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff [first-branch]...[second-branch]</span></span><br><span class="line"></span><br><span class="line">16.显示今天你写了多少行代码</span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff --shortstat <span class="string">"@&#123;0 day ago&#125;"</span></span></span><br><span class="line"></span><br><span class="line">17.显示某次提交的元数据和内容变化</span><br><span class="line"><span class="meta">$</span><span class="bash"> git show [commit]</span></span><br><span class="line"></span><br><span class="line">18.显示某次提交发生变化的文件</span><br><span class="line"><span class="meta">$</span><span class="bash"> git show --name-only [commit]</span></span><br><span class="line"></span><br><span class="line">19.显示某次提交时，某个文件的内容</span><br><span class="line"><span class="meta">$</span><span class="bash"> git show [commit]:[filename]</span></span><br><span class="line"></span><br><span class="line">20.显示当前分支的最近几次提交</span><br><span class="line"><span class="meta">$</span><span class="bash"> git reflog</span></span><br></pre></td></tr></table></figure>
<h2 id="0X08-远程同步篇"><a href="#0X08-远程同步篇" class="headerlink" title="0X08 远程同步篇"></a>0X08 远程同步篇</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">1.下载远程仓库的所有变动</span><br><span class="line"><span class="meta">$</span><span class="bash"> git fetch [remote]</span></span><br><span class="line"></span><br><span class="line">2.显示所有远程仓库</span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote -v</span></span><br><span class="line"></span><br><span class="line">3.显示某个远程仓库的信息</span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote show [remote]</span></span><br><span class="line"></span><br><span class="line">4.增加一个新的远程仓库，并命名</span><br><span class="line"><span class="meta">$</span><span class="bash"> git remote add [shortname] [url]</span></span><br><span class="line"></span><br><span class="line">5.取回远程仓库的变化，并与本地分支合并</span><br><span class="line"><span class="meta">$</span><span class="bash"> git pull [remote] [branch]</span></span><br><span class="line"></span><br><span class="line">6.上传本地指定分支到远程仓库</span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] [branch]</span></span><br><span class="line"></span><br><span class="line">7.强行推送当前分支到远程仓库，即使有冲突</span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] --force</span></span><br><span class="line"></span><br><span class="line">8.推送所有分支到远程仓库</span><br><span class="line"><span class="meta">$</span><span class="bash"> git push [remote] --all</span></span><br></pre></td></tr></table></figure>
<h2 id="0X09-时光回溯篇"><a href="#0X09-时光回溯篇" class="headerlink" title="0X09 时光回溯篇"></a>0X09 时光回溯篇</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">1.恢复暂存区的指定文件到工作区</span><br><span class="line">$ git checkout [file]</span><br><span class="line"></span><br><span class="line">2.恢复某个<span class="keyword">commit</span>的指定文件到暂存区和工作区</span><br><span class="line">$ git checkout [<span class="keyword">commit</span>] [<span class="keyword">file</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>恢复暂存区的所有文件到工作区</span><br><span class="line">$ git checkout .</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span>重置暂存区的指定文件，与上一次<span class="keyword">commit</span>保持一致，但工作区不变</span><br><span class="line">$ git <span class="keyword">reset</span> [<span class="keyword">file</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">5.</span>重置暂存区与工作区，与上一次<span class="keyword">commit</span>保持一致</span><br><span class="line">$ git <span class="keyword">reset</span> <span class="comment">--hard</span></span><br><span class="line"></span><br><span class="line"><span class="number">6.</span>重置当前分支的指针为指定<span class="keyword">commit</span>，同时重置暂存区，但工作区不变</span><br><span class="line">$ git <span class="keyword">reset</span> [<span class="keyword">commit</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">7.</span>重置当前分支的<span class="keyword">HEAD</span>为指定<span class="keyword">commit</span>，同时重置暂存区和工作区，与指定<span class="keyword">commit</span>一致</span><br><span class="line">$ git <span class="keyword">reset</span> <span class="comment">--hard [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="number">8.</span>重置当前<span class="keyword">HEAD</span>为指定<span class="keyword">commit</span>，但保持暂存区和工作区不变</span><br><span class="line">$ git <span class="keyword">reset</span> <span class="comment">--keep [commit]</span></span><br><span class="line"></span><br><span class="line"><span class="number">9.</span>新建一个<span class="keyword">commit</span>，用来撤销指定<span class="keyword">commit</span>，后者的所有变化都将被前者抵消，并且应用到当前分支</span><br><span class="line">$ git revert [<span class="keyword">commit</span>]</span><br><span class="line"></span><br><span class="line"><span class="number">10.</span>暂时将未提交的变化移除，稍后再移入</span><br><span class="line">$ git stash</span><br><span class="line">$ git stash pop</span><br></pre></td></tr></table></figure>
<h1 id="二、Github与信仰"><a href="#二、Github与信仰" class="headerlink" title="二、Github与信仰"></a>二、Github与信仰</h1><p><img src="/posts/git/30.png" alt=""></p>
<ul>
<li>这个周目是关于Linux下git时光机的实际应用 —— 把已有项目推到Github上。     </li>
<li>Github账号的创建与git的安装配置不再作说明。</li>
</ul>
<h2 id="1X01-设置Git"><a href="#1X01-设置Git" class="headerlink" title="1X01 设置Git"></a>1X01 设置Git</h2><p>设置用户名与email：</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git<span class="built_in"> config </span>--global user.name <span class="string">"your name"</span></span><br><span class="line">git<span class="built_in"> config </span>--global user.email <span class="string">"youremail@lalala.com"</span></span><br></pre></td></tr></table></figure>
<p>此时在/home下会新建一个<strong>.gitconfig</strong>文件</p>
<h2 id="1X02-配置SSH"><a href="#1X02-配置SSH" class="headerlink" title="1X02 配置SSH"></a>1X02 配置SSH</h2><p>1.创建SSH Key</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ssh-keygen -t rsa -C <span class="string">"youremail@lalala.com"</span></span></span><br></pre></td></tr></table></figure>
<p>系统会提示key的保存位置，一般为~/.ssh，接下来会请求输入口令，一路默认，敲三次回车即可。   </p>
<p>然后登陆gayhub -&gt; Accounting settings -&gt; SSH key -&gt; Add SSH Key -&gt; 取个容易区分的名字 -&gt; 把~/.ssh/id_rsa.pub文件中的内容粘贴上去即可。</p>
<p>用下面的命令进行测试：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ssh</span> <span class="selector-tag">-T</span> <span class="selector-tag">git</span>@<span class="keyword">github</span>.<span class="keyword">com</span></span><br></pre></td></tr></table></figure>
<h2 id="1X03-push-and-pull-from-github"><a href="#1X03-push-and-pull-from-github" class="headerlink" title="1X03 push and pull from github"></a>1X03 push and pull from github</h2><p>1.在新建的~/My_Message_Board目录中git clone已存在GitHub上的Repository</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="keyword">clone</span> <span class="title">URL</span></span><br></pre></td></tr></table></figure>
<p>2.先修改个readme，提交。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo vi README.md</span><br><span class="line">git status</span><br><span class="line">git <span class="keyword">add</span><span class="bash"> README.md</span></span><br><span class="line"><span class="bash">git status</span></span><br><span class="line"><span class="bash">git commit -m <span class="string">"Cyris readme-change 5/17"</span></span></span><br><span class="line"><span class="bash">git status</span></span><br><span class="line"><span class="bash">git remote add origin URL</span></span><br></pre></td></tr></table></figure>
<p>报了个错：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fata<span class="variable">l:</span> remote origin already <span class="built_in">exists</span>.</span><br></pre></td></tr></table></figure>
<p>解决方法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git remote rm origin</span></span><br></pre></td></tr></table></figure>
<p>再来。</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git remote <span class="built_in">add</span> origin <span class="built_in">URL</span>（这些<span class="built_in">URL</span>都是github里复制的<span class="built_in">URL</span>）</span><br></pre></td></tr></table></figure>
<p>3.下面把它push上去</p>
<figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">push</span> -u <span class="built_in">origin</span> master</span><br></pre></td></tr></table></figure>
<p>这里会要求输入GitHub账户的用户名和密码。输入即可。</p>
<p>4.提交完成，去GitHub看眼Repository。内容修改成功。</p>
</p></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/posts/tea-maker/" title="菠萝牛肉饭"><i class="fa fa-angle-double-left"></i>&nbsp;Previous post: 菠萝牛肉饭</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/posts/wiki/" title="魔法禁书目录">Next post: 魔法禁书目录&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2018&nbsp;<a target="_blank" href="https://cyris.pen.moe" rel="noopener noreferrer">Cyris</a></p><p>Theme&nbsp;<a target="_blank" href="https://github.com/SumiMakito/hexo-theme-typography" rel="noopener noreferrer">Typography</a>&nbsp;by&nbsp;<a target="_blank" href="https://www.keep.moe" rel="noopener noreferrer">Makito</a></p><p>Powered by&nbsp;<a target="_blank" href="https://hexo.io" rel="noopener noreferrer">Hexo</a></p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>